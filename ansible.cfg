# ansible.cfg
# This file must be in the root of your Git repository
# for AAP to pick it up.

[defaults]
# Use the jsonfile fact cache plugin
fact_cache_plugin = jsonfile
# Set the location for the fact cache to a directory within the project
# This path is relative to the job execution environment.
fact_cache_connection = /tmp/fact_cache_dir
# Set the timeout for the fact cache to prevent old facts from being used
fact_cache_timeout = 600

# playbook1.yml
# This playbook sets a variable and saves it to the fact cache.

---
- name: Set a variable and save to fact cache
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Set a dynamic welcome message
      ansible.builtin.set_fact:
        welcome_message: "Hello from Playbook 1! The current timestamp is {{ ansible_date_time.iso8601 }}"

    - name: Save the new fact to the cache
      ansible.builtin.fact_cache:
        fact: welcome_message
        value: "{{ welcome_message }}"
      delegate_to: localhost
      run_once: true